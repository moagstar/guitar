<!DOCTYPE html>
<html>
<body>
<div id="prompt"></div>
<div id="scale" style="padding-bottom: 10px"></div>
<button onclick="makeGuess('A')">A</button>
<button onclick="makeGuess('A#')">A#</button>
<button onclick="makeGuess('B')">B</button>
<button onclick="makeGuess('C')">C</button>
<button onclick="makeGuess('C#')">C#</button>
<button onclick="makeGuess('D')">D</button>
<button onclick="makeGuess('D#')">D#</button>
<button onclick="makeGuess('E')">E</button>
<button onclick="makeGuess('F')">F</button>
<button onclick="makeGuess('F#')">F#</button>
<button onclick="makeGuess('G')">G</button>
<button onclick="makeGuess('G#')">G#</button>
<script>

    const addText = (id, text, element) => {
        const el = document.createElement(element);
        el.appendChild(document.createTextNode(text));
        document.getElementById(id).appendChild(el);
    };

    const NOTES = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#'];
    let noteIndex = Math.floor(Math.random() * NOTES.length);

    const SCALE_FORMULAS = [
        {name: 'Ionian (major)', formula: [2, 2, 1, 2, 2, 2, 1]},
        //{name: 'Dorian', formula: [2, 1, 2, 2, 2, 1, 2]},
        //{name: 'Phrygian', formula: [1, 2, 2, 2, 1, 2, 2]},
        //{name: 'Lydian', formula: [2, 2, 2, 1, 2, 2, 1]},
        //{name: 'Mixolydian', formula: [2, 2, 1, 2, 2, 1, 2]},
        //{name: 'Aeolean (natural minor)', formula: [2, 1, 2, 2, 1, 2, 2]},
        //{name: 'Locrian', formula: [1, 2, 2, 1, 2, 2, 2]},
        //{name: 'Harmonic minor', formula: [2, 1, 2, 2, 1, 3, 1]},
        //{name: 'Melodic minor', formula: [2, 1, 2, 2, 2, 2, 1]},
        //{name: 'Blues', formula: [3, 2, 1, 1, 3, 2]},
    ]
    const scale = SCALE_FORMULAS[Math.floor(Math.random() * SCALE_FORMULAS.length)];

    addText('prompt', `${NOTES[noteIndex]} ${scale.name}`, 'p');

    let expected = '';
    for (const interval of scale.formula) {
        expected += NOTES[noteIndex % NOTES.length] + '-';
        noteIndex += interval;
    }

    const scaleEl = document.getElementById('scale');
    document.makeGuess = (guess) => {
        addText('scale', `${guess}-`, 'span');
        if (scaleEl.childElementCount === 7) {
            addText('prompt', (scaleEl.innerText === expected) ? 'CORRECT!': 'WRONG! ' + expected, 'p');
        }
    }

</script>
</body>
</html>